# Initial Prompt
I have this caddy config that rewrite /script.js and /api/send:  # Proxy /script.js to the remote Umami script
    @umamijs {
        path /script.js
        path /api/send
    }
    reverse_proxy @umamijs https://cloud.umami.is {
        # Ensure the Host header is correct
        header_up Host cloud.umami.is
    }. Investigate how to include this as a server route in the analytics plugin so the caddy configuration is not needed anymore. The https://cloud.umami.is value should be exposed as a runtime property

# Plan
1. Inspect the existing analytics layer to understand runtime options and how `/script.js` is loaded.
2. Add a runtime config property for the upstream Umami host and create middleware that proxies `/script.js` and `/api/send` to that host with the correct headers.
3. Document the change for consumers so the external Caddy rewrite is no longer required.

# Implementation Summary
Added an analytics-layer server middleware that proxies `/script.js` and `/api/send` to a configurable Umami host, removing the need for external Caddy rewrites.

# Next Steps
- Consider exposing additional paths (e.g., `/api/collect`) if future Umami versions require them.
